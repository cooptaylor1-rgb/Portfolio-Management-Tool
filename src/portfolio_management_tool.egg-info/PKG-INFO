Metadata-Version: 2.4
Name: portfolio-management-tool
Version: 0.1.0
Summary: A portfolio management tool for equity and fixed income portfolio management with statistical and risk analysis
License: MIT
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Financial and Insurance Industry
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: pandas>=2.0.0
Requires-Dist: numpy>=1.24.0
Requires-Dist: scipy>=1.10.0
Requires-Dist: requests>=2.28.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"

# Portfolio Management Tool

A comprehensive, institutional-grade portfolio management tool for equity and fixed income portfolio management with statistical and risk analysis.

## Features

### 1. Real-Time Market & Portfolio Data
- Support for Schwab and FactSet data providers
- Position-level detail across equities and fixed income
- Fundamental data integration for company analysis
- Bond analytics including yield, duration, and convexity

### 2. Advanced Risk Analytics
- **Value at Risk (VaR)**: Historical, parametric, and Monte Carlo methods
- **Conditional VaR (CVaR)**: Expected shortfall analysis
- **Factor-Based Risk**: Barra-style multi-factor models
- **Performance Metrics**: Sharpe, Sortino, Calmar, Information ratios
- **Fixed Income Risk**: Duration, convexity, key rate durations
- **Capture Ratios**: Upside and downside capture analysis

### 3. Stress Testing & Scenario Analysis
- Pre-built historical scenarios:
  - Global Financial Crisis 2008
  - COVID Crash 2020
  - Dot-Com Crash 2000
  - Inflation Spike 2022
  - And more...
- Hypothetical stress scenarios:
  - Interest rate shocks (+/- 200bps)
  - Volatility spikes (VIX 40/80/120)
  - Credit crisis scenarios
  - FX and commodity shocks
- Monte Carlo simulation with correlated returns

### 4. Performance Attribution
- Brinson-Fachler attribution analysis
- Sector and factor-level decomposition
- Alpha/beta decomposition
- Transaction cost analysis
- Timing contribution analysis

### 5. Portfolio Optimization
- Mean-variance optimization
- Risk parity / risk budgeting
- Black-Litterman model
- Efficient frontier generation
- Customizable constraints (weights, sectors, factors)

### 6. Liquidity Analysis
- Market impact modeling
- Liquidity scoring
- Days to liquidate estimation
- Crowding risk analysis

### 7. Reporting
- Daily tearsheets
- Risk dashboards
- Attribution reports
- Exposure summaries
- Multiple output formats (Markdown, HTML, JSON, CSV)

## Installation

```bash
# Clone the repository
git clone https://github.com/cooptaylor1-rgb/Portfolio-Management-Tool.git
cd Portfolio-Management-Tool

# Install in development mode
pip install -e ".[dev]"
```

## Quick Start

```python
from decimal import Decimal
from portfolio_management import Portfolio, Equity, FixedIncome, Position
from portfolio_management.analytics import RiskAnalyzer, StressTestEngine, PortfolioOptimizer

# Create a portfolio
portfolio = Portfolio(name="My Portfolio")

# Add equity positions
aapl = Equity(
    symbol="AAPL",
    name="Apple Inc.",
    sector="Technology",
    industry="Consumer Electronics",
)
portfolio.add_position(Position(
    security=aapl,
    quantity=Decimal("100"),
    cost_basis=Decimal("15000"),
    current_price=Decimal("175"),
))

# Add fixed income positions
bond = FixedIncome(
    symbol="US912828ZT90",
    name="US Treasury 10Y",
    coupon_rate=Decimal("0.025"),
)
portfolio.add_position(Position(
    security=bond,
    quantity=Decimal("10"),
    cost_basis=Decimal("10000"),
    current_price=Decimal("980"),
))

# Get portfolio summary
print(portfolio.summary())

# Risk Analysis
import numpy as np
analyzer = RiskAnalyzer(risk_free_rate=0.05)
returns = np.random.normal(0.0005, 0.02, 252)  # Sample returns
prices = np.cumprod(1 + returns) * 100

metrics = analyzer.calculate_all_metrics(returns, prices)
print(f"Annual Volatility: {metrics.volatility_annual:.2%}")
print(f"VaR 95%: {metrics.var_95:.2%}")
print(f"Sharpe Ratio: {metrics.sharpe_ratio:.2f}")

# Stress Testing
stress_engine = StressTestEngine()
equity_positions = {"AAPL": (17500, 1.2)}  # (value, beta)

gfc_result = stress_engine.run_scenario(
    stress_engine.get_scenario("GFC_2008"),
    equity_positions=equity_positions,
)
print(f"GFC 2008 Impact: {gfc_result.portfolio_impact:.2%}")

# Portfolio Optimization
optimizer = PortfolioOptimizer()
symbols = ["AAPL", "MSFT", "JPM"]
expected_returns = np.array([0.12, 0.10, 0.08])
cov_matrix = np.array([
    [0.0625, 0.035, 0.020],
    [0.035, 0.0484, 0.015],
    [0.020, 0.015, 0.0784],
])

result = optimizer.mean_variance_optimization(
    symbols, expected_returns, cov_matrix
)
print(f"Optimal Weights: {result.weights}")
print(f"Expected Return: {result.expected_return:.2%}")
print(f"Expected Volatility: {result.expected_volatility:.2%}")
```

## Data Providers

### Schwab Integration
```python
from portfolio_management.data import SchwabDataProvider

provider = SchwabDataProvider(
    api_key="your_api_key",
    api_secret="your_api_secret",
)

# Get current price
price = provider.get_current_price("AAPL")
print(f"AAPL Price: ${price.close_price}")

# Get historical prices
from datetime import date
history = provider.get_historical_prices(
    "AAPL",
    start_date=date(2024, 1, 1),
    end_date=date(2024, 12, 31),
)
```

### FactSet Integration
```python
from portfolio_management.data import FactSetDataProvider

provider = FactSetDataProvider(
    username="your_username",
    api_key="your_api_key",
)

# Get comprehensive fundamentals
fundamentals = provider.get_fundamentals("AAPL")
print(f"P/E Ratio: {fundamentals.pe_ratio}")
print(f"Market Cap: ${fundamentals.market_cap}")

# Get factor exposures
factors = provider.get_factor_exposures(["AAPL", "MSFT"])
```

## Testing

```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=portfolio_management

# Run specific test file
pytest tests/test_risk.py
```

## Project Structure

```
Portfolio-Management-Tool/
├── src/
│   └── portfolio_management/
│       ├── __init__.py
│       ├── models/
│       │   ├── portfolio.py      # Portfolio model
│       │   └── securities.py     # Security models
│       ├── data/
│       │   ├── providers.py      # Data provider interfaces
│       │   ├── schwab.py         # Schwab integration
│       │   └── factset.py        # FactSet integration
│       ├── analytics/
│       │   ├── risk.py           # Risk analytics
│       │   ├── stress_testing.py # Stress testing
│       │   ├── attribution.py    # Performance attribution
│       │   ├── optimization.py   # Portfolio optimization
│       │   └── reporting.py      # Report generation
│       └── utils/
├── tests/
│   ├── test_securities.py
│   ├── test_portfolio.py
│   ├── test_risk.py
│   ├── test_stress_testing.py
│   └── test_optimization.py
├── pyproject.toml
└── README.md
```

## Architecture

The tool is designed with a modular architecture following institutional-grade standards:

1. **Models Layer**: Core data structures for securities and portfolios
2. **Data Layer**: Integration with market data providers (Schwab, FactSet)
3. **Analytics Layer**: Risk analysis, optimization, attribution, and stress testing
4. **Reporting Layer**: Dashboard and report generation

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes with tests
4. Run linting: `ruff check .`
5. Run tests: `pytest`
6. Submit a pull request

## License

MIT License
